<!--
//  Markup for the AWS S3 Media Files LWC.
//
//  Copyright (c) 2022, salesforce.com, inc.
//  All rights reserved.
//  SPDX-License-Identifier: BSD-3-Clause
//  For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause
//
//  Contact: john.meyer@salesforce.com
-->
<template>
	<lightning-card>
		<header slot="title" class="slds-media slds-media_center">
			<div class="slds-media__figure slds-icon_container">
				<template if:false={hideIcon}>
					<!-- prettier-ignore -->
					<svg class="slds-icon slds-icon_small" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 400 400" style="enable-background:new 0 0 400 400;" xml:space="preserve">
                        <g>
                            <path fill="#484848" d="M350,400H50c-27.6,0-50-22.4-50-50V50C0,22.4,22.4,0,50,0h300c27.6,0,50,22.4,50,50v300
                                C400,377.6,377.6,400,350,400z"/>
                        </g>
                        <g>
                            <path fill="#F89400" d="M307,291.4c-120,57.1-194.5,9.3-242.2-19.7c-3-1.8-8,0.4-3.6,5.4c15.9,19.3,67.9,65.7,135.9,65.7
                                c68,0,108.5-37.1,113.5-43.6C315.6,292.8,312.1,289.3,307,291.4z M340.7,272.8c-3.2-4.2-19.6-5-29.9-3.7
                                c-10.3,1.2-25.8,7.5-24.5,11.3c0.7,1.4,2.1,0.8,9.2,0.1c7.1-0.7,27-3.2,31.2,2.2c4.2,5.5-6.4,31.5-8.3,35.7
                                c-1.9,4.2,0.7,5.3,4.2,2.5c3.4-2.8,9.7-10,13.8-20.3C340.6,290.3,343.2,276,340.7,272.8z"></path>
                            <path fill="#FFFFFF" d="M276.6,200.7V105c0-16.4-15.9-53.6-73-53.6c-57.1,0-87.5,35.7-87.5,67.8l47.7,4.3
                                c0,0,10.6-32.1,35.3-32.1s23,20,23,24.3v20.8c-31.6,1.1-110.1,10.1-110.1,76.3c0,71.2,89.9,74.2,119.3,28.2
                                c1.1,1.9,2.4,3.7,4.1,5.4c10.8,11.4,25.3,25,25.3,25l36.9-36.4C297.6,235,276.6,218.6,276.6,200.7z M167.4,204.1
                                c0-30.6,32.8-36.8,54.7-37.5v26.3C222.1,245,167.4,237.1,167.4,204.1z"></path>
                        </g>
                    </svg>
				</template>
			</div>
			<div class="slds-media__body">
				<h2>
					<strong>{cardTitle}</strong>
				</h2>
			</div>
		</header>
		<div slot="actions">
			<lightning-button-group>
				<lightning-button
					label="Refresh"
					icon-name="utility:refresh"
					title="Refresh the file list"
					onclick={getFiles}
				></lightning-button>
				<lightning-button
					label="Delete"
					variant="destructive"
					icon-name="utility:delete"
					title="Delete the selected files"
					disabled={deleteButtonDisabled}
					onclick={handleDeleteButton}
				></lightning-button>
			</lightning-button-group>
		</div>
		<div class="slds-p-horizontal_medium">
			<template if:true={spinnerVisible}>
				<lightning-spinner variant="brand" size="medium"></lightning-spinner>
			</template>
			<template if:true={componentConfigured}>
				<template if:true={fileListEmpty}>
					<section class="slds-illustration slds-illustration_small">
						<!-- prettier-ignore -->
						<svg class="slds-illustration__svg" viewBox="0 0 468 194" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
						<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
						<g transform="translate(-67.000000, -112.000000)">
						<g>
						<g transform="translate(245.000000, 200.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
						<path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
						<path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
						<path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
						<path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
						</g>
						<g transform="translate(135.000000, 152.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
						<path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
						<path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
						<path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
						<path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
						</g>
						<g transform="translate(69.000000, 256.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
						<path vector-effect="non-scaling-stroke" d="M14,36.5 L464,36.5"></path>
						<path vector-effect="non-scaling-stroke" d="M0,36.5 L6,36.5"></path>
						<polyline vector-effect="non-scaling-stroke" stroke-linejoin="round" points="234.5 36 279.5 0 313.5 26"></polyline>
						<path vector-effect="non-scaling-stroke" d="M279.5,1 L279.5,35" stroke-linejoin="round"></path>
						<path vector-effect="non-scaling-stroke" d="M313.5,11 C313.5,20.7437888 313.5,25.7437888 313.5,26 C313.5,25.7437888 313.5,20.7437888 313.5,11 Z" stroke-linejoin="round"></path>
						<polyline vector-effect="non-scaling-stroke" stroke-linejoin="round" points="303.5 17 313.5 9 347.5 36"></polyline>
						</g>
						<g transform="translate(113.000000, 178.000000)">
						<g transform="translate(30.000000, 8.000000)" class="slds-illustration__fill-secondary">
						<path vector-effect="non-scaling-stroke" d="M29.5,60.5 L29.5,12 C29.5,5.372583 34.872583,0 41.5,0 C48.127417,0 53.5,5.372583 53.5,12 L53.5,40.5 L70.5,40.5 L70.5,27 C70.5,23.1340068 73.6340068,20 77.5,20 C81.3659932,20 84.5,23.1340068 84.5,27 L84.5,48.5 C84.5,51.8137085 81.8137085,54.5 78.5,54.5 L53.5,54.5 L53.5,118.5 L29.5,118.5 L29.5,74.5 L6.5,74.5 C3.1862915,74.5 0.5,71.8137085 0.5,68.5 L0.5,39 C0.5,35.1340068 3.63400675,32 7.5,32 C11.3659932,32 14.5,35.1340068 14.5,39 L14.5,60.5 L29.5,60.5 Z"></path>
						</g>
						<g transform="translate(59.000000, 7.000000)" fill="#FFFFFF">
						<path vector-effect="non-scaling-stroke" d="M2,11 C3.65332031,8.49145508 5.65181478,6.77364095 7.9954834,5.84655762 C11.5109863,4.45593262 15.2684326,4.95605469 17.8156738,6.2824707 C20.362915,7.60888672 22.3626709,9.64978027 23.2602539,11.81604 C23.8586426,13.2602132 23.8586426,11.7547201 23.2602539,7.29956055 L19.612793,3.56494141 L13.7923584,0.564331055 L8.765625,1.42663574 L4.67321777,3.19787598 C2.69893392,5.13902708 1.69559733,6.16722532 1.66320801,6.2824707 C1.61462402,6.45533878 0.856079102,9.49145508 0.813964844,9.66003418 C0.785888672,9.77242025 1.18123372,10.2190755 2,11 Z"></path>
						</g>
						<g class="slds-illustration__stroke-primary" stroke-width="3">
						<path vector-effect="non-scaling-stroke" d="M0,126.5 L356,126.5" stroke-linecap="round"></path>
						<path vector-effect="non-scaling-stroke" d="M362.5,126.5 L372.013149,126.5" stroke-linecap="round"></path>
						<path vector-effect="non-scaling-stroke" d="M107.5,20 L107.5,28" stroke-linecap="round"></path>
						<path vector-effect="non-scaling-stroke" d="M113,30.6568542 L118.656854,25" stroke-linecap="round"></path>
						<path vector-effect="non-scaling-stroke" d="M37.5,32 L37.5,40" stroke-linecap="round"></path>
						<path vector-effect="non-scaling-stroke" d="M44,42.6568542 L49.6568542,37" stroke-linecap="round"></path>
						<path vector-effect="non-scaling-stroke" d="M25,42.6568542 L30.6568542,37" stroke-linecap="round" transform="translate(27.828427, 39.828427) scale(-1, 1) translate(-27.828427, -39.828427) "></path>
						<path vector-effect="non-scaling-stroke" d="M71.5,0 L71.5,8" stroke-linecap="round"></path>
						<path vector-effect="non-scaling-stroke" d="M79,10.6568542 L84.6568542,5" stroke-linecap="round"></path>
						<path vector-effect="non-scaling-stroke" d="M58,10.6568542 L63.6568542,5" stroke-linecap="round" transform="translate(60.828427, 7.828427) scale(-1, 1) translate(-60.828427, -7.828427) "></path>
						<path vector-effect="non-scaling-stroke" d="M59.5,68.5 L59.5,20 C59.5,13.372583 64.872583,8 71.5,8 C78.127417,8 83.5,13.372583 83.5,20 L83.5,48.5 L100.5,48.5 L100.5,35 C100.5,31.1340068 103.634007,28 107.5,28 C111.365993,28 114.5,31.1340068 114.5,35 L114.5,56.5 C114.5,59.8137085 111.813708,62.5 108.5,62.5 L83.5,62.5 L83.5,126.5 L59.5,126.5 L59.5,82.5 L36.5,82.5 C33.1862915,82.5 30.5,79.8137085 30.5,76.5 L30.5,47 C30.5,43.1340068 33.6340068,40 37.5,40 C41.3659932,40 44.5,43.1340068 44.5,47 L44.5,68.5 L59.5,68.5 Z"></path>
						<path vector-effect="non-scaling-stroke" d="M77,88.5 L92.5,88.5 L92.5,81 C92.5,77.1340068 95.6340068,74 99.5,74 L99.5,74 C103.365993,74 106.5,77.1340068 106.5,81 L106.5,96.5 C106.5,99.8137085 103.813708,102.5 100.5,102.5 L77,102.5"
						class="slds-illustration__fill-secondary" stroke-linecap="round" stroke-linejoin="round"></path>
						</g>
						</g>
						<g transform="translate(429.000000, 242.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
						<g>
						<path vector-effect="non-scaling-stroke" d="M12.5,4 L12.5,50"></path>
						<polyline vector-effect="non-scaling-stroke" stroke-linejoin="round" points="11 18.5 0.5 18.5 0.5 0"></polyline>
						<polyline vector-effect="non-scaling-stroke" stroke-linejoin="round" points="14 25.5 24.5 25.5 24.5 8"></polyline>
						<polyline vector-effect="non-scaling-stroke" stroke-linejoin="round" points="2.5 31 2.5 38.5 11 38.5"></polyline>
						</g>
						</g>
						<g transform="translate(327.000000, 95.000000)">
						<g>
						<circle vector-effect="non-scaling-stroke" class="slds-illustration__fill-secondary" cx="64" cy="64" r="23"></circle>
						<circle vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="135,1,1,18" transform="translate(64.000000, 64.000000) rotate(230.000000) translate(-64.000000, -64.000000) "
						cx="64" cy="64" r="45"></circle>
						<circle vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="107,10" transform="translate(64.000000, 64.000000) rotate(150.000000) translate(-64.000000, -64.000000) "
						cx="64" cy="64" r="33"></circle>
						</g>
						<g transform="translate(41.000000, 41.000000)" class="slds-illustration__stroke-primary" stroke-width="3">
						<circle vector-effect="non-scaling-stroke" cx="23" cy="23" r="23"></circle>
						</g>
						</g>
						</g>
						</g>
						</g>
						</svg>
						<div class="slds-text-longform">
							<h3 class="slds-text-heading_medium">No files found</h3>
						</div>
					</section>
				</template>
				<template if:false={fileListEmpty}>
					<section class="slds-var-p-top_x-small">
						<div onkeyup={handleSearchKeyUp}>
							<lightning-input
								name="enter-search"
								label="Search for case files"
								type="search"
								lwc:ref="search"
								is-loading={searching}
								onchange={handleSearchInput}
							></lightning-input>
						</div>
						
						<template if:true={hasSearchResults}>
							<lightning-button 
								class="slds-align_absolute-center slds-m-vertical_x-small"
								onclick={clearSearchResults}
								variant="destructive-text"
								label="Clear Search Results"
							></lightning-button>
							<table
								data-id="search-list"
								class="slds-table slds-no-row-hover slds-table_bordered slds-border_left slds-border_right"
								aria-label="List of Search Results"
								aria-multiselectable="true"
								role="grid">
								<thead>
									<tr class="slds-line-height_reset">
										<th scope="col">
											<lightning-input
												type="checkbox"
												checked={selectAll}
												label="Select All"
												variant="label-hidden"
												title="Select or deselect all of the files below"
												onchange={handleSelectAll}
											></lightning-input>
										</th>
										<template if:false={hideViewAndTranscription}>
											<th scope="col" class="slds-align_absolute-center">
												<lightning-icon icon-name="utility:preview" size="x-small"></lightning-icon>
											</th>
										</template>
										<th scope="col" class="slds-text-align_left">File</th>
										<th scope="col" class="slds-text-align_center">Uploaded</th>
										<th scope="col" class="slds-text-align_center">Size</th>
									</tr>
								</thead>
								<tbody>
									<template for:each={kendraResults} for:item="file">
										<tr key={file.key}>
											<td width="3rem">
												<lightning-input
													type="checkbox"
													checked={file.selected}
													label={file.name}
													title="Select or deselect file"
													variant="label-hidden"
													data-key={file.key}
													class="slds-align_absolute-center"
													onchange={handleFileSelected}
												></lightning-input>
											</td>
											<template if:false={hideViewAndTranscription}>
												<td width="8rem">
													<template if:true={file.fileIsViewable}>
														<lightning-button-icon
															type="button"
															icon-name={file.viewIcon}
															size="small"
															alternative-text="Preview the file"
															data-key={file.key}
															onclick={handleViewFile}
														></lightning-button-icon>
													</template>
												</td>
											</template>
											<td class="slds-text-align_left slds-truncate">
												<lightning-icon icon-name={file.icon} size="small"></lightning-icon> &nbsp;&nbsp;
												<lightning-formatted-url
													label={file.fileDisplayName}
													value={file.link}
													title="Download this file"
												></lightning-formatted-url>
												<template if:true={file.fileIsRedacted}>
													&nbsp;&nbsp;
													<span class="slds-text-color_inverse redacted"> &nbsp;REDACTED&nbsp; </span>
												</template>
											</td>	
											<td class="slds-text-align_center" width="20%">
												<lightning-formatted-date-time
													value={file.lastModifiedDate}
													year="numeric"
													month="numeric"
													day="numeric"
													hour="2-digit"
													minute="2-digit"
												></lightning-formatted-date-time>
											</td>
											<td class="slds-text-align_right" width="10%">
												<lightning-formatted-text value={file.size}></lightning-formatted-text>
											</td>								
										</tr>
									</template>
								</tbody>			
							</table>
						</template>

						<template if:false={hasSearchResults}>
							<table
								data-id="file-list"
								class="slds-table slds-no-row-hover slds-table_bordered slds-border_left slds-border_right"
								aria-label="List of Files"
								aria-multiselectable="true"
								role="grid"
							>
								<thead>
									<tr class="slds-line-height_reset">
										<th scope="col">
											<lightning-input
												type="checkbox"
												checked={selectAll}
												label="Select All"
												variant="label-hidden"
												title="Select or deselect all of the files below"
												onchange={handleSelectAll}
											></lightning-input>
										</th>
										<template if:false={hideViewAndTranscription}>
											<th scope="col" class="slds-align_absolute-center">
												<lightning-icon icon-name="utility:preview" size="x-small"></lightning-icon>
											</th>
										</template>
										<th scope="col" class="slds-text-align_left">File</th>
										<th scope="col" class="slds-text-align_center">Uploaded</th>
										<th scope="col" class="slds-text-align_center">Size</th>
									</tr>
								</thead>
								<tbody>
									<template for:each={fileList} for:item="file">
										<tr key={file.key}>
											<td width="3rem">
												<lightning-input
													type="checkbox"
													checked={file.selected}
													label={file.name}
													title="Select or deselect file"
													variant="label-hidden"
													data-key={file.key}
													class="slds-align_absolute-center"
													onchange={handleFileSelected}
												></lightning-input>
											</td>
											<template if:false={hideViewAndTranscription}>
												<td width="8rem">
													<template if:true={file.fileIsViewable}>
														<lightning-button-icon
															type="button"
															icon-name={file.viewIcon}
															size="small"
															alternative-text="Preview the file"
															data-key={file.key}
															onclick={handleViewFile}
														></lightning-button-icon>
													</template>
												</td>
											</template>
											<td class="slds-text-align_left slds-truncate">
												<lightning-icon icon-name={file.icon} size="small"></lightning-icon> &nbsp;&nbsp;
												<lightning-formatted-url
													label={file.fileDisplayName}
													value={file.link}
													title="Download this file"
												></lightning-formatted-url>
												<template if:true={file.fileIsRedacted}>
													&nbsp;&nbsp;
													<span class="slds-text-color_inverse redacted"> &nbsp;REDACTED&nbsp; </span>
												</template>
											</td>
											<td class="slds-text-align_center" width="20%">
												<lightning-formatted-date-time
													value={file.lastModifiedDate}
													year="numeric"
													month="numeric"
													day="numeric"
													hour="2-digit"
													minute="2-digit"
												></lightning-formatted-date-time>
											</td>
											<td class="slds-text-align_right" width="10%">
												<lightning-formatted-text value={file.size}></lightning-formatted-text>
											</td>
										</tr>
									</template>
								</tbody>
							</table>
						</template>
					</section>
				</template>
				<section>
					<div class="slds-align_absolute-center">
						<lightning-input type="file" onchange={handleFilesChange} multiple></lightning-input>
					</div>
				</section>
			</template>
			<template if:false={componentConfigured}>
				<div class="slds-illustration slds-illustration_small">
					<!-- prettier-ignore -->
					<svg class="slds-illustration__svg slds-var-p-top_medium" viewBox="0 0 470 229" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
							<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
							  <g transform="translate(-65.000000, -89.000000)">
								<g>
								  <g transform="translate(67.000000, 266.000000)">
									<path vector-effect="non-scaling-stroke" d="M16,36.5 L466,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
									<path vector-effect="non-scaling-stroke" d="M0,36.5 L6,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
									<polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" points="43 36 87.5 0 121.5 27"></polyline>
									<polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" points="111 17 121.5 9 153 36"></polyline>
									<path vector-effect="non-scaling-stroke" d="M50.962964,14.4391572 L57,36 L45.770218,26.1063642 L49.037036,14.4391572 C49.1859485,13.9073269 49.7377996,13.5969106 50.2696299,13.7458231 C50.6059625,13.8399963 50.8687909,14.1028246 50.962964,14.4391572 Z"
									  class="slds-illustration__fill-secondary" transform="translate(51.385109, 24.626882) scale(-1, 1) translate(-51.385109, -24.626882) "></path>
								  </g>
								  <g transform="translate(451.500000, 238.500000)">
									<g fill="#FFFFFF">
									  <path vector-effect="non-scaling-stroke" d="M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"></path>
									</g>
									<g class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
									  <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.323943662 34 54 -1.81721305e-12 54"></polygon>
									  <path vector-effect="non-scaling-stroke" d="M17,4.6953125 C17,43.0456294 17,62.6471919 17,63.5 C17,62.6471919 17,43.0456294 17,4.6953125 Z"></path>
									  <path vector-effect="non-scaling-stroke" d="M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z" stroke-linejoin="round" transform="translate(21.000000, 34.323944) scale(-1, 1) translate(-21.000000, -34.323944) "></path>
									</g>
								  </g>
								  <g transform="translate(408.000000, 205.500000)">
									<g transform="translate(1.000000, 0.000000)" fill="#FFFFFF">
									  <path vector-effect="non-scaling-stroke" d="M25.6478873,0 L50.879042,84.4273253 C51.1953215,85.4856452 50.5937789,86.5999782 49.535459,86.9162577 C49.3496374,86.9717906 49.1567264,87 48.9627843,87 L2.33299037,87 C1.22842087,87 0.332990367,86.1045695 0.332990367,85 C0.332990367,84.8060578 0.361199757,84.6131469 0.416732643,84.4273253 L25.6478873,0 Z"></path>
									</g>
									<g class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
									  <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="26.5 0 52.5 87 0.5 87"></polygon>
									  <path vector-effect="non-scaling-stroke" d="M26.5,3.58642578 C26.5,64.0261034 26.5,94.9972948 26.5,96.5 C26.5,94.9972948 26.5,64.0261034 26.5,3.58642578 Z"></path>
									  <path vector-effect="non-scaling-stroke" d="M15.6478873,42 C22.9812207,49.078692 26.6478873,52.7453587 26.6478873,53 C26.6478873,52.7453587 22.9812207,49.078692 15.6478873,42 Z" stroke-linejoin="round"></path>
									  <path vector-effect="non-scaling-stroke" d="M27.6478873,68 C36.9812207,57.078692 41.6478873,51.7453587 41.6478873,52 C41.6478873,51.7453587 36.9812207,57.078692 27.6478873,68 Z" stroke-linejoin="round"></path>
									</g>
								  </g>
								  <g transform="translate(323.317280, 164.835938) rotate(-45.000000) translate(-323.317280, -164.835938) translate(242.317280, 130.835938)">
									<g transform="translate(5.000000, 44.000000)" fill="#FFFFFF">
									  <path vector-effect="non-scaling-stroke" d="M4.18947979,0.995611783 L0.115234375,11.9555255 C12.0957996,19.4577143 18.3338849,23.301537 18.8294904,23.4869936 C19.1669204,23.6132606 21.7612542,24.0399819 26.9701953,23.7763273 C28.5980425,23.6939326 31.6346656,23.3623612 36.0800647,22.7816131 C40.0461992,21.6828201 43.0275796,20.7161876 45.0242059,19.8817158 C47.0208321,19.0472439 50.3465588,17.377878 55.0013859,14.8736182 L47.5277368,3.21878589 L4.18947979,0.995611783 Z"></path>
									</g>
									<g transform="translate(1.000000, 0.000000)" class="slds-illustration__fill-secondary">
									  <rect class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" x="0.973240311" y="10.995821" width="11.5" height="12"></rect>
									  <path vector-effect="non-scaling-stroke" d="M4.77755146,50.2284782 C13.286202,52.6362568 21.480957,53.7936597 29.3618164,53.7006867 C37.2426758,53.6077138 44.7765582,51.7400968 51.9634637,48.0978356 C50.0751252,44.4670451 48.7826758,41.7898449 48.0861155,40.0662351 C47.3895551,38.3426252 46.5236255,35.6790055 45.4883267,32.075376 L45.2946319,0.293204959 L12.5695367,0.148192827 L12.5726441,32.0166806 C11.5738974,36.4623212 10.6196945,39.7477667 9.71003558,41.8730172 C8.80037666,43.9982676 7.15621528,46.7834213 4.77755146,50.2284782 Z"></path>
									  <path vector-effect="non-scaling-stroke" d="M45.4341011,10.7997716 L160.934101,10.7997716 L160.934101,29.2075859 C138.796894,24.9149057 121.296894,22.8695992 108.434101,23.0716664 C103.947529,23.0716664 96.9638862,23.0716664 87.4831733,23.0716664 L45.4341011,23.0716664 L45.4341011,10.7997716 Z"></path>
									</g>
									<g transform="translate(0.000000, 0.000000)">
									  <path vector-effect="non-scaling-stroke" d="M13.5015145,4.53816197e-13 L46.505417,4.53816197e-13 L46.505417,24.0516129 C46.0805407,29.6108858 47.016166,35.1227138 49.312293,40.5870968 C51.6084201,46.0514798 55.1733269,52.064383 60.0070135,58.6258065 C49.5057718,64.6387097 39.5045892,67.6451613 30.0034658,67.6451613 C20.5023423,67.6451613 10.5011597,64.6387097 -8.20017976e-05,58.6258065 C5.7540776,50.5948062 9.47046374,44.581903 11.1490764,40.5870968 C12.8276891,36.5922906 13.6118351,31.0804626 13.5015145,24.0516129 L13.5015145,4.53816197e-13 Z"
										class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
									  <rect class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" x="1.97324031" y="10.995821" width="11.5" height="12"></rect>
									  <path vector-effect="non-scaling-stroke" d="M46.4341011,10.7997716 L161.934101,10.7997716 L161.934101,29.2075859 C139.796894,24.9149057 122.296894,22.8695992 109.434101,23.0716664 C104.947529,23.0716664 97.9638862,23.0716664 88.4831733,23.0716664 L46.4341011,23.0716664 L46.4341011,10.7997716 Z"
										class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
									  <polygon vector-effect="non-scaling-stroke" class="slds-illustration__fill-primary" points="66 10.5225806 102 10.5225806 102.162282 23.0225806 66.0542614 22.8973803"></polygon>
									</g>
								  </g>
								  <g transform="translate(124.000000, 219.518658)">
									<g transform="translate(117.000000, 0.000000)" fill="#FFFFFF">
									  <polygon vector-effect="non-scaling-stroke" points="0.115234375 0.823139211 0.115234375 6.95790484 131.128906 21.124897 131.128906 14.975483"></polygon>
									</g>
									<g transform="translate(95.000000, 4.000000)" class="slds-illustration__fill-secondary">
									  <polygon vector-effect="non-scaling-stroke" points="21.9667969 0.213764211 152.662109 14.9813423 152.662109 65.9637642 160.867188 80.1434517 174.628906 92.3211861 0.63671875 92.3211861 13.7480469 80.1434517 21.9667969 61.2977486"></polygon>
									</g>
									<g>
									  <path vector-effect="non-scaling-stroke" d="M118.5,15.4813423 L118.5,61.4813423 C117.921224,71.8381104 115.333984,79.318309 110.738281,83.921938 C106.142578,88.525567 100.896484,92.8787018 95,96.9813423 L271,96.9813423 C264.389323,92.6555667 259.341797,87.3824891 255.857422,81.1621094 C252.373047,74.9417297 250.253906,67.5264029 249.5,58.916129 L249.5,0.481342336 L118.5,15.4813423 Z"
										class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(183.000000, 48.731342) scale(-1, 1) translate(-183.000000, -48.731342) "></path>
									  <path vector-effect="non-scaling-stroke" d="M271.928751,76.7784845 L280,97 L262,97 L270.071249,76.7784845 C270.275982,76.2655493 270.857768,76.0157027 271.370703,76.2204365 C271.625359,76.3220801 271.827108,76.5238291 271.928751,76.7784845 Z"
										class="slds-illustration__fill-primary"></path>
									  <path vector-effect="non-scaling-stroke" d="M282.428751,84.2946136 L287.5,97 L275.5,97 L280.571249,84.2946136 C280.775982,83.7816784 281.357768,83.5318318 281.870703,83.7365656 C282.125359,83.8382092 282.327108,84.0399581 282.428751,84.2946136 Z"
										class="slds-illustration__fill-primary"></path>
									  <path vector-effect="non-scaling-stroke" d="M90.4287513,76.7784845 L98.5,97 L80.5,97 L88.5712487,76.7784845 C88.7759825,76.2655493 89.3577681,76.0157027 89.8707033,76.2204365 C90.1253588,76.3220801 90.3271077,76.5238291 90.4287513,76.7784845 Z"
										class="slds-illustration__fill-primary" transform="translate(89.500000, 86.998788) scale(-1, 1) translate(-89.500000, -86.998788) "></path>
									  <path vector-effect="non-scaling-stroke" d="M76.9287513,84.2946136 L82,97 L70,97 L75.0712487,84.2946136 C75.2759825,83.7816784 75.8577681,83.5318318 76.3707033,83.7365656 C76.6253588,83.8382092 76.8271077,84.0399581 76.9287513,84.2946136 Z"
										class="slds-illustration__fill-primary" transform="translate(76.000000, 90.756853) scale(-1, 1) translate(-76.000000, -90.756853) "></path>
									  <path vector-effect="non-scaling-stroke" d="M20,96.9813423 L370,96.9813423" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
									  <path vector-effect="non-scaling-stroke" d="M0,96.9813423 L12,96.9813423" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
									  <path vector-effect="non-scaling-stroke" d="M226.5,14.4813423 L226.5,40.4813423 C226.854167,55.9423134 234.6875,67.6089801 250,75.4813423" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
									  <path vector-effect="non-scaling-stroke" d="M212.5,12.4813423 L212.5,51.4813423 C211.329427,75.4461105 226.830078,87.4461105 259.001953,87.4813423" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"
										stroke-linejoin="round"></path>
									  <path vector-effect="non-scaling-stroke" d="M190.5,9.48134234 L190.5,96.4813423" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
									  <path vector-effect="non-scaling-stroke" d="M160.5,5.48134234 L160.5,96.4813423" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
									  <path vector-effect="non-scaling-stroke" d="M148.5,4.48134234 L148.5,60.4813423 C148.166667,84.3362203 131.634766,96.2636593 98.9042969,96.2636593" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"
										stroke-linejoin="round"></path>
									  <path vector-effect="non-scaling-stroke" d="M131.5,2.48134234 L131.5,54.2203125 C132.691406,76.2363071 124.326172,87.2443044 106.404297,87.2443044" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"
										stroke-linejoin="round"></path>
									</g>
								  </g>
								  <g transform="translate(160.000000, 107.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
									<path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
									<path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
									<path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
									<path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
								  </g>
								  <g transform="translate(319.000000, 147.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
									<path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
									<path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
									<path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
									<path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
								  </g>
								  <g transform="translate(179.000000, 216.518658)">
									<g transform="translate(6.000000, 2.000000)" fill="#FFFFFF">
									  <path vector-effect="non-scaling-stroke" d="M20.8180195,40.0662428 L20.8180195,3.98882348 C14.8180195,9.37296043 11.8180195,15.3858637 11.8180195,22.0275332 C11.8180195,28.6692027 14.8180195,34.6821059 20.8180195,40.0662428 Z" transform="translate(16.318019, 22.027533) scale(-1, -1) rotate(-45.000000) translate(-16.318019, -22.027533) "></path>
									  <path vector-effect="non-scaling-stroke" d="M38.0732996,21.3284985 L38.0732996,-1.21988855 C34.3232996,2.14519704 32.4482996,5.90326156 32.4482996,10.054305 C32.4482996,14.2053484 34.3232996,17.963413 38.0732996,21.3284985 Z" transform="translate(35.260800, 10.054305) scale(1, -1) rotate(-45.000000) translate(-35.260800, -10.054305) "></path>
									</g>
									<g transform="translate(0.000000, 6.000000)" class="slds-illustration__fill-secondary">
									  <path vector-effect="non-scaling-stroke" d="M20.8180195,42.0662428 L20.8180195,5.98882348 C14.8180195,11.3729604 11.8180195,17.3858637 11.8180195,24.0275332 C11.8180195,30.6692027 14.8180195,36.6821059 20.8180195,42.0662428 Z" transform="translate(16.318019, 24.027533) rotate(-45.000000) translate(-16.318019, -24.027533) "></path>
									  <path vector-effect="non-scaling-stroke" d="M47.9262378,21.3284985 L47.9262378,-1.21988855 C44.1762378,2.14519704 42.3012378,5.90326156 42.3012378,10.054305 C42.3012378,14.2053484 44.1762378,17.963413 47.9262378,21.3284985 Z" transform="translate(45.113738, 10.054305) scale(-1, 1) rotate(-45.000000) translate(-45.113738, -10.054305) "></path>
									</g>
									<g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
									  <path vector-effect="non-scaling-stroke" d="M60,64.4813423 C42.5559896,58.4405997 33.7226563,49.4405997 33.5,37.4813423 L33.5,0.481342336"></path>
									  <path vector-effect="non-scaling-stroke" d="M19.5,44.8774194 C25.5,39.4932824 28.5,33.4803792 28.5,26.8387097 C28.5,20.1970402 25.5,14.1841369 19.5,8.8 C13.5,14.1841369 10.5,20.1970402 10.5,26.8387097 C10.5,33.4803792 13.5,39.4932824 19.5,44.8774194 Z"
										transform="translate(19.500000, 26.838710) rotate(-45.000000) translate(-19.500000, -26.838710) "></path>
									  <path vector-effect="non-scaling-stroke" d="M43.125,25.3354839 C46.875,21.9703983 48.75,18.2123338 48.75,14.0612903 C48.75,9.91024688 46.875,6.15218236 43.125,2.78709677 C39.375,6.15218236 37.5,9.91024688 37.5,14.0612903 C37.5,18.2123338 39.375,21.9703983 43.125,25.3354839 Z"
										transform="translate(43.125000, 14.061290) scale(-1, 1) rotate(-45.000000) translate(-43.125000, -14.061290) "></path>
									</g>
								  </g>
								</g>
							  </g>
							</g>
					</svg>
					<div class="slds-var-p-around_large slds-text-longform">
						<h3 class="slds-text-heading_medium">You have a little work to do</h3>
						<div class="slds-var-p-bottom_medium slds-text-body_regular slds-text-align_center">
							<p>
								You have not yet configured this component with a valid prefix, the correct AWS Access Key, Id
								and/or AWS Secret Access Key in the Lightning App Builder. Please get these items from your AWS
								account administrator.
							</p>
							<p>(While you're at it, make sure that your AWS bucket name and AWS region are also set correctly.)</p>
							<p>
								You can get complete configuration instructions at&nbsp;
								<lightning-formatted-url
									label="this GitHub repository"
									value="https://github.com/SFDC-Assets/AWS-S3-Media-Files"
								></lightning-formatted-url>
								.
							</p>
						</div>
					</div>
				</div>
			</template>
		</div>
		<template if:true={uploadModalVisible}>
			<section
				role="dialog"
				tabindex="-1"
				class="slds-modal slds-fade-in-open slds-modal_small"
				aria-modal="true"
				aria-labelledby="modal-heading"
				aria-describedby="modal-content"
			>
				<div class="slds-modal__container">
					<header class="slds-modal__header slds-p-horizontal_medium">
						<lightning-button-icon
							icon-name="utility:close"
							size="large"
							variant="bare-inverse"
							class="slds-modal__close"
							title="Close this dialog box"
							onclick={handleModalCloseButton}
						></lightning-button-icon>
						<div class="slds-media slds-media_center">
							<div class="slds-media__figure slds-p-horizontal_medium">
								<lightning-icon icon-name="utility:upload" variant="success" size="medium"></lightning-icon>
							</div>
							<div class="slds-media__body">
								<p class="slds-p-horizontal_medium slds-text-heading_medium slds-text-align_left">
									Uploading files ...
								</p>
							</div>
						</div>
					</header>
					<section class="slds-modal__content slds-p-around_medium">
						<template for:each={uploadProgressList} for:item="file">
							<lightning-layout key={file.name} horizontal-align="spread" vertical-align="center">
								<lightning-layout-item size="1" padding="around-small">
									<lightning-icon icon-name={file.iconName} size="medium"></lightning-icon>
								</lightning-layout-item>
								<lightning-layout-item size="8" padding="around-small">
									<p>
										<lightning-formatted-text value={file.name}></lightning-formatted-text>
									</p>
									<lightning-progress-bar
										value={file.progress}
										variant="circular"
										size="medium"
									></lightning-progress-bar>
									<p class="slds-text-align_right slds-text-body_small">
										<lightning-formatted-text value={file.total}></lightning-formatted-text>
									</p>
								</lightning-layout-item>
								<lightning-layout-item size="2" padding="horizontal-medium">
									<p class="slds-text-align_right slds-var-p-vertical_small slds-p-horizontal_medium">
										<lightning-formatted-text value={file.loaded}></lightning-formatted-text>
									</p>
								</lightning-layout-item>
								<lightning-layout-item size="1">
									<lightning-icon
										icon-name={file.statusIcon}
										variant={file.statusIconVariant}
										size="x-small"
									></lightning-icon>
								</lightning-layout-item>
							</lightning-layout>
						</template>
					</section>
					<footer class="slds-modal__footer">
						<lightning-button
							label="Cancel"
							variant="neutral"
							icon-name="utility:close"
							class="slds-p-right_medium"
							onclick={handleModalCloseButton}
						></lightning-button>
						<lightning-button
							label="Done"
							variant="brand"
							icon-name="utility:check"
							disabled={doneButtonDisabled}
							onclick={handleModalDoneButton}
						></lightning-button>
					</footer>
				</div>
			</section>
			<div class="slds-backdrop slds-backdrop_open"></div>
		</template>
		<template if:false={hideViewAndTranscription}>
			<template if:true={viewModalVisible}>
				<section
					role="dialog"
					tabindex="-1"
					class="slds-modal slds-fade-in-open slds-modal_medium"
					aria-modal="true"
					aria-labelledby="modal-heading"
					aria-describedby="modal-content"
				>
					<div class="slds-modal__container">
						<header class="slds-modal__header slds-p-horizontal_medium">
							<lightning-button-icon
								icon-name="utility:close"
								size="large"
								variant="bare-inverse"
								class="slds-modal__close"
								title="Close this dialog box"
								onclick={handleViewModalDoneButton}
							></lightning-button-icon>
							<div class="slds-media slds-media_center">
								<div class="slds-media__figure slds-p-horizontal_medium">
									<lightning-icon icon-name={fileBeingViewedIcon} variant="success" size="large"></lightning-icon>
								</div>
								<div class="slds-media__body slds-p-horizontal_medium">
									<p class="slds-text-heading_medium slds-text-align_left">Previewing file:</p>
									<p class="slds-text-heading_small slds-text-align_left slds-truncate">
										<lightning-formatted-text value={fileNameBeingViewed}></lightning-formatted-text>
									</p>
								</div>
							</div>
						</header>
						<section class="slds-modal__content slds-p-around_medium">
							<template if:true={fileBeingViewedIsImage}>
								<lightning-layout vertical-align="start">
									<lightning-layout-item padding="horizontal-small" size="6">
										<div class="slds-align_absolute-center">
											<img src={fileBeingViewedUrl} class="image-dimensions" />
										</div>
									</lightning-layout-item>
									<lightning-layout-item padding="horizontal-small" size="6">
										<template if:true={imageHasLatLong}>
											<lightning-map map-markers={mapMarkers} zoom-level={initialZoomLevel}></lightning-map>
										</template>
										<template if:false={imageHasLatLong}>
											<div class="slds-illustration slds-illustration_small">
												<!-- prettier-ignore -->
												<svg class="slds-illustration__svg" viewBox="0 0 396 245" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
												<defs>
												<rect x="77" y="47" width="20" height="28"></rect>
												</defs>
												<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
												<g transform="translate(-114.000000, -78.000000)">
												<g>
												<g transform="translate(124.000000, 154.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
												<path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
												<path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
												<path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
												<path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
												</g>
												<g transform="translate(339.000000, 107.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
												<path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
												<path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
												<path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
												<path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
												</g>
												<g transform="translate(151.000000, 296.500000)">
												<g transform="translate(10.339768, 0.275260)"></g>
												<path vector-effect="non-scaling-stroke" d="M140.962142,26.4644491 C138.225735,20.0143094 131.944776,15.5029106 124.633892,15.5029106 C122.619663,15.5029106 120.683612,15.8453541 118.878328,16.4764392 C115.451481,11.1704266 109.567406,7.66985447 102.883789,7.66985447 C96.4912675,7.66985447 90.8301585,10.8721423 87.3508511,15.7935668 C85.9589956,14.968161 84.3423157,14.4956341 82.6177606,14.4956341 C81.1083143,14.4956341 79.6815102,14.8576334 78.4157672,15.5014039 C74.9975328,6.58722215 66.5098304,0.275259875 56.5804557,0.275259875 C47.4632836,0.275259875 39.5615782,5.59684366 35.6837305,13.3681823 C33.3912034,12.266973 30.8314865,11.6515593 28.1312741,11.6515593 C19.4373504,11.6515593 12.1998844,18.0312998 10.6476214,26.4644491 L140.962142,26.4644491 Z"
												class="slds-illustration__fill-secondary"></path>
												<path vector-effect="non-scaling-stroke" d="M0,25 L130,25" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
												</g>
												<g transform="translate(320.000000, 281.000000)">
												<g transform="translate(0.293436, 0.054545)">
												<path vector-effect="non-scaling-stroke" d="M165.428708,41.9454545 L0.0995432562,41.9454545 C0.0336614956,41.2089487 0,40.4630069 0,39.7090909 C0,26.2132599 10.7866531,15.2727273 24.0926641,15.2727273 C27.7492016,15.2727273 31.215485,16.0989227 34.3199502,17.5772977 C39.5712028,7.14424616 50.271428,0 62.6175975,0 C76.0636257,0 87.5573893,8.47383452 92.1862485,20.441159 C93.9002755,19.5768947 95.8324059,19.0909091 97.8764479,19.0909091 C100.211783,19.0909091 102.401037,19.7252784 104.285841,20.8333889 C108.997403,14.2263569 116.663488,9.92727273 125.320028,9.92727273 C138.043441,9.92727273 148.627152,19.2146805 150.834755,31.4671412 C151.487388,31.3631046 152.156394,31.3090909 152.837838,31.3090909 C159.117096,31.3090909 164.340238,35.8953699 165.428708,41.9454545 Z"
												class="slds-illustration__fill-secondary"></path>
												<path vector-effect="non-scaling-stroke" d="M32.7065637,40.4454545 L173.706564,40.4454545" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
												</g>
												</g>
												<g transform="translate(116.000000, 80.000000)">
												<g transform="translate(106.000000, 4.000000)">
												<g>
												<use class="slds-illustration__fill-secondary" fill-rule="evenodd" xlink:href="#path-1"></use>
												<rect class="slds-illustration__stroke-primary" stroke-width="3" x="78.5" y="48.5" width="17" height="25"></rect>
												</g>
												<rect class="slds-illustration__fill-secondary" x="72" y="30" width="30" height="22" rx="2"></rect>
												<circle vector-effect="non-scaling-stroke" class="slds-illustration__fill-secondary" cx="87" cy="150" r="87"></circle>
												<circle vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" cx="87.5" cy="23.5" r="23.5"></circle>
												</g>
												<g transform="translate(112.000000, 35.000000)" fill="#FFFFFF">
												<circle vector-effect="non-scaling-stroke" cx="81" cy="119" r="73"></circle>
												<rect x="67" y="0" width="28" height="4"></rect>
												<path vector-effect="non-scaling-stroke" d="M0.180175781,90.2270508 C0.778808594,89.5117187 11.3666992,64.2470703 30.4042969,52.2089844 C49.4418945,40.1708984 64.3725586,35.2084961 85.1640625,36.3398437 C105.955566,37.4711914 122.305176,44.8969727 133.487793,53.7832031 C144.67041,62.6694336 156.910645,77.7836914 163.28125,93.7817383 C167.52832,104.447103 164.678548,96.9777018 154.731934,71.3735352 L134.561523,50.390625 L106.423828,35.831543 L83.5615234,32.3847656 L61.4130859,34.121582 L40.7431641,41.5869141 L21.2519531,54.597168 L6.90820313,73.0634766 C2.02376302,84.9827474 -0.21891276,90.7039388 0.180175781,90.2270508 Z"></path>
												</g>
												<g class="slds-illustration__stroke-primary" stroke-width="3">
												<path vector-effect="non-scaling-stroke" d="M178.5,49.7801039 C170.984351,44.9862617 166,36.5752096 166,27 C166,12.0883118 178.088312,0 193,0 C207.911688,0 220,12.0883118 220,27 C220,36.5752096 215.015649,44.9862617 207.5,49.7801039 L207.5,55.5 C207.5,56.0522847 207.052285,56.5 206.5,56.5 L179.5,56.5 C178.947715,56.5 178.5,56.0522847 178.5,55.5 L178.5,49.7801039 Z"></path>
												<path vector-effect="non-scaling-stroke" d="M178.5,40.7750367 C175.091592,37.1883928 173,32.3384551 173,27 C173,15.954305 181.954305,7 193,7 C204.045695,7 213,15.954305 213,27 C213,32.3384551 210.908408,37.1883928 207.5,40.7750367 L207.5,35.5 C207.5,34.9477153 207.052285,34.5 206.5,34.5 L179.5,34.5 C178.947715,34.5 178.5,34.9477153 178.5,35.5 L178.5,40.7750367 Z"></path>
												<path vector-effect="non-scaling-stroke" d="M179.5,34.5 L206.5,34.5 C207.052285,34.5 207.5,34.9477153 207.5,35.5 L207.5,55.5 C207.5,56.0522847 207.052285,56.5 206.5,56.5 L179.5,56.5 C178.947715,56.5 178.5,56.0522847 178.5,55.5 L178.5,35.5 C178.5,34.9477153 178.947715,34.5 179.5,34.5 Z"
												stroke-linecap="round" stroke-linejoin="round"></path>
												<path vector-effect="non-scaling-stroke" d="M184.5,56.5 L184.5,67.356737 C187.353249,67.1189178 190.206393,67 193.059326,67 C195.900065,67 198.713659,67.1179036 201.5,67.3537468 L201.5,56.5 L184.5,56.5 Z"></path>
												<path vector-effect="non-scaling-stroke" d="M27,241.5 L392,241.5" stroke-linecap="round"></path>
												<path vector-effect="non-scaling-stroke" d="M0,241.5 L20,241.5" stroke-linecap="round"></path>
												<circle vector-effect="non-scaling-stroke" cx="193" cy="154" r="87"></circle>
												<circle vector-effect="non-scaling-stroke" cx="193" cy="154" r="73"></circle>
												</g>
												</g>
												<g transform="translate(252.000000, 178.000000)">
												<g transform="translate(2.000000, 1.000000)">
												<circle vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="6" cx="55" cy="55" r="41"></circle>
												<polygon vector-effect="non-scaling-stroke" class="slds-illustration__fill-secondary" points="55 0 62 16 48 16"></polygon>
												<polygon vector-effect="non-scaling-stroke" class="slds-illustration__fill-secondary" transform="translate(55.000000, 102.000000) scale(1, -1) translate(-55.000000, -102.000000) " points="55 94 62 110 48 110"></polygon>
												<polygon vector-effect="non-scaling-stroke" class="slds-illustration__fill-secondary" transform="translate(102.000000, 55.000000) scale(1, -1) rotate(90.000000) translate(-102.000000, -55.000000) " points="102 47 109 63 95 63"></polygon>
												<polygon vector-effect="non-scaling-stroke" class="slds-illustration__fill-secondary" transform="translate(8.000000, 55.000000) scale(-1, -1) rotate(90.000000) translate(-8.000000, -55.000000) " points="8 47 15 63 1 63"></polygon>
												<polygon vector-effect="non-scaling-stroke" class="slds-illustration__fill-secondary" transform="translate(78.371087, 79.079086) scale(1, -1) rotate(45.000000) translate(-78.371087, -79.079086) " points="78.3710872 47.4827561 96.4223693 110.675417 60.3198052 110.675417"></polygon>
												</g>
												<g class="slds-illustration__fill-primary">
												<polygon vector-effect="non-scaling-stroke" transform="translate(35.687128, 35.395128) scale(-1, 1) rotate(45.000000) translate(-35.687128, -35.395128) " points="35.6871284 3.79879726 53.7384105 66.9914578 17.6358464 66.9914578"></polygon>
												<ellipse cx="58" cy="58.0018766" rx="9" ry="9.00187656"></ellipse>
												</g>
												<g transform="translate(49.000000, 49.000000)" stroke="#FFFFFF" stroke-width="3">
												<ellipse cx="9" cy="9.00187656" rx="9" ry="9.00187656"></ellipse>
												</g>
												</g>
												<g transform="translate(436.500000, 259.500000)">
												<g class="slds-illustration__fill-secondary">
												<path vector-effect="non-scaling-stroke" d="M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"></path>
												</g>
												<g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
												<polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.323943662 34 54 -1.81721305e-12 54"></polygon>
												<path vector-effect="non-scaling-stroke" d="M17,4.6953125 C17,43.0456294 17,62.6471919 17,63.5 C17,62.6471919 17,43.0456294 17,4.6953125 Z"></path>
												<path vector-effect="non-scaling-stroke" d="M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z" stroke-linejoin="round" transform="translate(21.000000, 34.323944) scale(-1, 1) translate(-21.000000, -34.323944) "></path>
												</g>
												</g>
												<g transform="translate(393.000000, 226.500000)">
												<g transform="translate(1.000000, 0.000000)" class="slds-illustration__fill-secondary">
												<path vector-effect="non-scaling-stroke" d="M25.6478873,0 L50.879042,84.4273253 C51.1953215,85.4856452 50.5937789,86.5999782 49.535459,86.9162577 C49.3496374,86.9717906 49.1567264,87 48.9627843,87 L2.33299037,87 C1.22842087,87 0.332990367,86.1045695 0.332990367,85 C0.332990367,84.8060578 0.361199757,84.6131469 0.416732643,84.4273253 L25.6478873,0 Z"></path>
												</g>
												<g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
												<polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="26.5 0 52.5 87 0.5 87"></polygon>
												<path vector-effect="non-scaling-stroke" d="M26.5,3.58642578 C26.5,64.0261034 26.5,94.9972948 26.5,96.5 C26.5,94.9972948 26.5,64.0261034 26.5,3.58642578 Z"></path>
												<path vector-effect="non-scaling-stroke" d="M15.6478873,42 C22.9812207,49.078692 26.6478873,52.7453587 26.6478873,53 C26.6478873,52.7453587 22.9812207,49.078692 15.6478873,42 Z" stroke-linejoin="round"></path>
												<path vector-effect="non-scaling-stroke" d="M27.6478873,68 C36.9812207,57.078692 41.6478873,51.7453587 41.6478873,52 C41.6478873,51.7453587 36.9812207,57.078692 27.6478873,68 Z" stroke-linejoin="round"></path>
												</g>
												</g>
												<g transform="translate(182.500000, 259.500000)">
												<g class="slds-illustration__fill-secondary">
												<path vector-effect="non-scaling-stroke" d="M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"></path>
												</g>
												<g class="slds-illustration__stroke-primary" stroke-width="3">
												<polygon vector-effect="non-scaling-stroke" stroke-linecap="round" stroke-linejoin="round" points="17 0.323943662 34 54 -1.81721305e-12 54"></polygon>
												<path vector-effect="non-scaling-stroke" d="M17,4.32394366 C17,42.2551731 17,61.6471919 17,62.5 C17,61.6471919 17,42.2551731 17,4.32394366 Z"></path>
												<path vector-effect="non-scaling-stroke" d="M17,32.3239437 C23.6666667,39.4518278 27,43.1184944 27,43.3239437 C27,43.1184944 23.6666667,39.4518278 17,32.3239437 Z" stroke-linecap="round" stroke-linejoin="round" transform="translate(22.000000, 37.823944) scale(-1, 1) translate(-22.000000, -37.823944) "></path>
												</g>
												</g>
												<g transform="translate(129.000000, 209.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
												<g transform="translate(27.848898, 30.021465) rotate(-15.000000) translate(-27.848898, -30.021465) translate(5.848898, 5.021465)">
												<path vector-effect="non-scaling-stroke" d="M1.73977935,3.49433365 C1.73977935,3.49433365 11.283937,0.730940796 13.3525511,10.749914" transform="translate(7.546165, 6.947488) rotate(41.000000) translate(-7.546165, -6.947488) "></path>
												<path vector-effect="non-scaling-stroke" d="M11.1319089,10.2387854 C11.1319089,10.2387854 20.6760665,7.47539254 22.7446806,17.4943658" transform="translate(16.938295, 13.691939) scale(-1, 1) rotate(-41.000000) translate(-16.938295, -13.691939) "></path>
												<path vector-effect="non-scaling-stroke" d="M19.7302848,42.5865514 C19.7302848,42.5865514 29.2744424,39.8231586 31.3430565,49.8421318"></path>
												<path vector-effect="non-scaling-stroke" d="M31.7302848,42.5865514 C31.7302848,42.5865514 41.2744424,39.8231586 43.3430565,49.8421318" transform="translate(37.536671, 46.039705) scale(-1, 1) translate(-37.536671, -46.039705) "></path>
												</g>
												</g>
												</g>
												</g>
												</g>
												</svg>
												<div class="slds-text-longform">
													<h3 class="slds-text-heading_medium">
														The image has no gelocation information.
													</h3>
												</div>
											</div>
										</template>
									</lightning-layout-item>
								</lightning-layout>
								<lightning-layout vertical-align="start">
									<lightning-layout-item size="6">
										<template if:true={fileHasImageMetadata}>
											<div class="slds-var-p-top_medium slds-p-horizontal_medium">
												<p class="slds-var-p-bottom_small">
													<lightning-formatted-text
														value="EXIF Metadata"
														class="slds-text-heading_medium"
													></lightning-formatted-text>
												</p>
												<div class="slds-scrollable scroller-size-10">
													<table
														data-id="image-metadata"
														class="slds-table slds-no-row-hover slds-table_cell-buffer slds-table_striped"
														aria-label="Image Metadata"
														role="grid"
														width="100%"
													>
														<tbody>
															<template for:each={imageMetadata} for:item="item">
																<tr key={item.metadataKey}>
																	<td>
																		<strong
																			><lightning-formatted-text
																				value={item.metadataKey}
																			></lightning-formatted-text
																		></strong>
																	</td>
																	<td>
																		<lightning-formatted-text
																			value={item.metadataValue}
																		></lightning-formatted-text>
																	</td>
																</tr>
															</template>
														</tbody>
													</table>
												</div>
											</div>
										</template>
										<template if:false={fileHasImageMetadata}>
											<div class="slds-align_absolute-center">
												<p class="slds-text-heading_medium">Could not obtain EXIF metadata from image.</p>
											</div>
										</template>
									</lightning-layout-item>
									<lightning-layout-item size="6">
										<template if:true={fileHasImageRecognition}>
											<div class="slds-var-p-top_medium slds-p-horizontal_medium">
												<p class="slds-var-p-bottom_small">
													<lightning-formatted-text
														value="Artificial Intelligence (AI) Image Recognition"
														class="slds-text-heading_medium"
													></lightning-formatted-text>
												</p>
												<div class="slds-scrollable scroller-size-10">
													<table
														data-id="image-recognition"
														class="slds-table slds-no-row-hover slds-table_cell-buffer slds-table_striped"
														aria-label="Image Recognition"
														role="grid"
														width="100%"
													>
														<tbody>
															<template for:each={imageRecogitionWords} for:item="item">
																<tr key={item.metadataKey}>
																	<td>
																		<strong
																			><lightning-formatted-text
																				value={item.word}
																			></lightning-formatted-text
																		></strong>
																	</td>
																	<td>
																		<lightning-formatted-text
																			value={item.confidence}
																		></lightning-formatted-text>
																	</td>
																</tr>
															</template>
														</tbody>
													</table>
												</div>
											</div>
										</template>
										<template if:false={fileHasImageRecognition}>
											<div class="slds-align_absolute-center">
												<p class="slds-text-heading_medium">
													Could not obtain object recognition from image.
												</p>
											</div>
										</template>
									</lightning-layout-item>
								</lightning-layout>
							</template>
							<template if:false={fileBeingViewedIsImage}>
								<div class="slds-align_absolute-center">
									<template if:true={fileBeingViewedIsVideo}>
										<video src={fileBeingViewedUrl} controls preload="metadata" width="640px"></video>
									</template>
									<template if:true={fileBeingViewedIsAudio}>
										<audio src={fileBeingViewedUrl} controls preload="metadata"></audio>
									</template>
								</div>
								<template if:true={fileHasTranscription}>
									<div class="slds-var-p-vertical_medium">
										<p class="slds-var-p-bottom_small slds-text-heading_medium">Transcription</p>
										<p class="slds-text-body_small slds-text-color_weak slds-text-align_left slds-trucate">
											<em>
												Hover over each word in the transcription to see the confidence level of the
												transcripted word. Click on a word to scrub the replay to the point at which the
												word is spoken.
											</em>
										</p>
									</div>
									<div class="slds-scrollable scroller-size-10">
										<table
											data-id="transcription"
											class="slds-table slds-no-row-hover"
											aria-label="Transcription"
											role="grid"
											width="100%"
										>
											<tbody>
												<template for:each={transcriptionData} for:item="timeblock">
													<tr key={timeblock.id} data-id={timeblock.id}>
														<td width="10rem">
															<strong>
																<lightning-formatted-text
																	value={timeblock.blockStartTimeString}
																></lightning-formatted-text>
															</strong>
														</td>
														<td>
															<p class="wrap-text">
																<template for:each={timeblock.textBlock} for:item="word">
																	<template if:true={word.isText}>
																		<lightning-formatted-text
																			key={word.startTime}
																			value=" "
																		></lightning-formatted-text>
																	</template>
																	<template if:true={word.isRedacted}>
																		<lightning-formatted-text
																			class="slds-text-color_inverse redacted"
																			key={word.startTime}
																			value="REDACTED"
																			title={word.confidence}
																			data-start-time={word.startTime}
																			onclick={handleWordClick}
																		></lightning-formatted-text>
																	</template>
																	<template if:false={word.isRedacted}>
																		<lightning-formatted-text
																			key={word.startTime}
																			value={word.text}
																			title={word.confidence}
																			data-start-time={word.startTime}
																			onclick={handleWordClick}
																		></lightning-formatted-text>
																	</template>
																</template>
															</p>
														</td>
													</tr>
												</template>
											</tbody>
										</table>
									</div>
									<template if:true={transcriptionWordDocUrl}>
										<div class="slds-var-p-top_medium">
											<lightning-icon
												icon-name="doctype:word"
												size="small"
												class="slds-p-right_small"
											></lightning-icon>
											<lightning-formatted-url
												label="Download the transcript"
												value={transcriptionWordDocUrl}
											></lightning-formatted-url>
										</div>
									</template>
								</template>
							</template>
						</section>
						<footer class="slds-modal__footer">
							<lightning-button
								label="Done"
								variant="brand"
								icon-name="utility:check"
								onclick={handleViewModalDoneButton}
							></lightning-button>
						</footer>
					</div>
				</section>
				<div class="slds-backdrop slds-backdrop_open"></div>
			</template>
		</template>
	</lightning-card>
</template>